<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SistoXen - Sistema de Controle de Estoque</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-box">
                <h1>ðŸ§ª SistoXen</h1>
                <p>Sistema de Controle de Estoque de Produtos QuÃ­micos</p>
                <form id="loginForm">
                    <input type="text" id="username" placeholder="UsuÃ¡rio" required>
                    <input type="password" id="password" placeholder="Senha" required>
                    <button type="submit">Entrar</button>
                    <div id="loginError" class="error-message"></div>
                </form>
                <div class="login-links">
                    <a href="#" onclick="showCadastroForm(); return false;">Criar conta</a>
                    <a href="#" onclick="showResetRequestForm(); return false;">Esqueci minha senha</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Tela Principal -->
    <div id="mainScreen" class="screen">
        <nav class="navbar">
            <div class="nav-brand">ðŸ§ª SistoXen</div>
            <div class="nav-menu">
                <button class="nav-btn active" data-view="estoque">Estoque</button>
                <button class="nav-btn" data-view="produtos">Produtos</button>
                <button class="nav-btn" data-view="lotes">Lotes</button>
                <button class="nav-btn" data-view="movimentacoes">MovimentaÃ§Ãµes</button>
                <button class="nav-btn" data-view="inventario">InventÃ¡rio</button>
                <button class="nav-btn" data-view="usuarios">UsuÃ¡rios</button>
            </div>
            <div class="nav-user">
                <span id="userName"></span>
                <button id="logoutBtn" class="btn-logout">Sair</button>
            </div>
        </nav>

        <main class="main-content">
            <!-- View: Estoque Completo -->
            <div id="estoqueView" class="view active">
                <div class="view-header">
                    <h2>ðŸ“¦ VisualizaÃ§Ã£o de Estoque - Atualizado em <span id="dataAtualizacao"></span></h2>
                    <div class="view-actions">
                        <input type="text" id="searchEstoque" placeholder="ðŸ” Buscar..." class="search-input">
                        <button class="btn btn-primary" onclick="showIniciarInventario()">ðŸ“‹ Iniciar InventÃ¡rio</button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table id="estoqueTable" class="estoque-table">
                        <thead>
                            <tr>
                                <th rowspan="2">CÃ³digo<br>Produto</th>
                                <th rowspan="2">Total</th>
                                <th colspan="2">Estoque</th>
                                <th rowspan="2">Lote</th>
                                <th rowspan="2">DescriÃ§Ã£o do Produto</th>
                                <th rowspan="2">Tipo<br>UnitÃ¡rio</th>
                                <th rowspan="2">Fabricante</th>
                                <th rowspan="2">Validade</th>
                                <th rowspan="2">Data de<br>abertura</th>
                                <th rowspan="2">Data de<br>finalizaÃ§Ã£o</th>
                                <th rowspan="2">Estoque MÃ­nimo<br>(unidade)</th>
                                <th rowspan="2">Armazenamento</th>
                                <th rowspan="2">Licitar</th>
                            </tr>
                            <tr>
                                <th>Estoque<br>Fechado</th>
                                <th>Em uso<br>(aberto)</th>
                            </tr>
                        </thead>
                        <tbody id="estoqueTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- View: Produtos -->
            <div id="produtosView" class="view">
                <div class="view-header">
                    <h2>Cadastro de Produtos</h2>
                    <button class="btn btn-primary" onclick="showAddProdutoModal()">+ Novo Produto</button>
                </div>
                <div class="table-container">
                    <table id="produtosTable" class="data-table">
                        <thead>
                            <tr>
                                <th>CÃ³digo</th>
                                <th>DescriÃ§Ã£o</th>
                                <th>Tipo</th>
                                <th>Fabricante</th>
                                <th>CMM</th>
                                <th>Est. MÃ­nimo</th>
                                <th>AÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- View: Lotes -->
            <div id="lotesView" class="view">
                <div class="view-header">
                    <h2>Associar Lotes aos Produtos</h2>
                    <button class="btn btn-primary" onclick="showAddLoteModal()">+ Novo Lote</button>
                </div>
                <div class="table-container">
                    <table id="lotesTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>NÂº Lote</th>
                                <th>Fabricante</th>
                                <th>Quantidade Inicial</th>
                                <th>Validade</th>
                                <th>ObservaÃ§Ãµes</th>
                                <th>AÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- View: MovimentaÃ§Ãµes -->
            <div id="movimentacoesView" class="view">
                <div class="view-header">
                    <h2>MovimentaÃ§Ãµes e Eventos</h2>
                    <div class="view-actions">
                        <button class="btn btn-success" onclick="showAbrirUnidadeModal()">ðŸ“¦ Abrir Unidade</button>
                        <button class="btn" style="background: #9C27B0; color: white;" onclick="showFinalizarUnidadeModal()">âœ“ Finalizar Unidade</button>
                        <button class="btn btn-primary" onclick="showAddMovimentacaoModal()">+ Nova MovimentaÃ§Ã£o</button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="movimentacoesTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Produto</th>
                                <th>Lote</th>
                                <th>Tipo</th>
                                <th>Quantidade</th>
                                <th>Motivo</th>
                                <th>UsuÃ¡rio</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- View: InventÃ¡rio -->
            <div id="inventarioView" class="view">
                <div class="view-header">
                    <h2>ðŸ“‹ HistÃ³rico de InventÃ¡rios</h2>
                    <button class="btn btn-primary" onclick="createInventario()">+ Novo InventÃ¡rio</button>
                </div>
                <div id="inventarioList" class="inventory-list"></div>
            </div>

            <!-- View: UsuÃ¡rios -->
            <div id="usuariosView" class="view">
                <div class="view-header">
                    <h2>Gerenciar UsuÃ¡rios</h2>
                    <button class="btn btn-primary" onclick="showAddUsuarioModal()">+ Novo UsuÃ¡rio</button>
                </div>
                <div class="table-container">
                    <table id="usuariosTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Criado em</th>
                                <th>AÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals serÃ£o inseridos via JavaScript -->
    <div id="modalContainer"></div>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/modals.js"></script>
    <script src="js/views.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
